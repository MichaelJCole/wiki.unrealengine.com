(window.webpackJsonp=window.webpackJsonp||[]).push([[1124],{282:function(e,a,t){"use strict";t.r(a);var s=t(28),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("UT3 Weapons Tutorial - Enforcer - Epic Wiki")]),e._v(" "),t("h1",{attrs:{id:"ut3-weapons-tutorial-enforcer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ut3-weapons-tutorial-enforcer"}},[e._v("#")]),e._v(" UT3 Weapons Tutorial - Enforcer")]),e._v(" "),t("h2",{attrs:{id:"contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#UT3_Weapons_Tutorial_-_Enforcer"}},[e._v("1 UT3 Weapons Tutorial - Enforcer")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Requirements"}},[e._v("1.1 Requirements")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Features"}},[e._v("1.2 Features")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Notes"}},[e._v("1.3 Notes")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Contact"}},[e._v("1.4 Contact")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Enforcer"}},[e._v("1.5 Enforcer")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Primary_Fire"}},[e._v("1.5.1 Primary Fire")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Secondary_Fire"}},[e._v("1.5.2 Secondary Fire")])])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Implementation"}},[e._v("1.6 Implementation")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Creating_Enforcer_Classes"}},[e._v("1.6.1 Creating Enforcer Classes")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Setting_up_weapon_asset_references"}},[e._v("1.6.2 Setting up weapon asset references")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Weapon_firing_properties"}},[e._v("1.6.3 Weapon firing properties")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Camera_Shake"}},[e._v("1.6.4 Camera Shake")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Adding_custom_weapon_firing_state"}},[e._v("1.6.5 Adding custom weapon firing state")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Implementing_burst_firing_state"}},[e._v("1.6.6 Implementing burst firing state")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Using_faster_FireInterval_for_burst_firing"}},[e._v("1.6.6.1 Using faster FireInterval for burst firing")])])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Customizing_the_burst_properties_per-weapon"}},[e._v("1.6.7 Customizing the burst properties per-weapon")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Burst_animations_.26_sounds"}},[e._v("1.6.8 Burst animations & sounds")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Dual_weapons"}},[e._v("1.6.9 Dual weapons")])])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Source_Code"}},[e._v("1.7 Source Code")])])])])]),e._v(" "),t("h1",{attrs:{id:"ut3-weapons-tutorial-enforcer-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ut3-weapons-tutorial-enforcer-2"}},[e._v("#")]),e._v(" UT3 Weapons Tutorial - Enforcer")]),e._v(" "),t("p",[e._v("This tutorial will show you how to create Enforcer from Unreal Tournament 3 using C++ only.")]),e._v(" "),t("p",[e._v("NOTE:")]),e._v(" "),t("ul",[t("li",[e._v("UT has just upgraded to UE 4.2.1, this tutorial will be verified for compatibility shortly.")])]),e._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("p",[e._v("Some existing C++ & Unreal Engine knowledge is needed.")]),e._v(" "),t("ul",[t("li",[e._v("Engine version: 4.2")]),e._v(" "),t("li",[e._v("Skill level: intermediate")]),e._v(" "),t("li",[e._v("Unreal Tournament commit: "),t("a",{attrs:{href:"https://github.com/EpicGames/UnrealTournament/commit/9fe9fc679a26a0ea816e9fd3db080255394bf4dc",target:"_blank",rel:"noopener noreferrer"}},[e._v("9fe9fc679a26a0ea816e9fd3db080255394bf4dc"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[e._v("#")]),e._v(" Features")]),e._v(" "),t("ul",[t("li",[e._v("Firing multiple projectiles in a burst")]),e._v(" "),t("li",[e._v("Dual weapons")])]),e._v(" "),t("h2",{attrs:{id:"notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),t("ul",[t("li",[e._v("When overriding a function in subclass always add a definition to the header file as well.")]),e._v(" "),t("li",[e._v("Functions with "),t("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Programming/UnrealArchitecture/Reference/Functions/Specifiers/BlueprintNativeEvent/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("BlueprintNativeEvent"),t("OutboundLink")],1),e._v(' attribute generate additional virtual function called "FunctionName_Implementation". Override the _Implementation one instead.')]),e._v(" "),t("li",[e._v("Code snippets are located in grey expandable boxes. Click Expand on the right to see the code.")]),e._v(" "),t("li",[e._v("Yellow lines in code snippets highlight only the code that needs to be changed.")])]),e._v(" "),t("h2",{attrs:{id:"contact"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contact"}},[e._v("#")]),e._v(" Contact")]),e._v(" "),t("ul",[t("li",[e._v("Forum thread; "),t("a",{attrs:{href:"https://forums.unrealtournament.com/showthread.php?11237-UT3-Enforcer-Tutorial",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://forums.unrealtournament.com/showthread.php?11237-UT3-Enforcer-Tutorial"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("--"),t("a",{attrs:{href:"/User:Neai",title:"User:Neai"}},[e._v("Neai")]),e._v(" ("),t("a",{attrs:{href:"/index.php?title=User_talk:Neai&action=edit&redlink=1",title:"User talk:Neai (page does not exist)"}},[e._v("talk")]),e._v(") 17:49, 30 June 2014 (UTC)")]),e._v(" "),t("h2",{attrs:{id:"enforcer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enforcer"}},[e._v("#")]),e._v(" Enforcer")]),e._v(" "),t("p",[e._v("We'll start by defining what features we want to implement:")]),e._v(" "),t("h3",{attrs:{id:"primary-fire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#primary-fire"}},[e._v("#")]),e._v(" Primary Fire")]),e._v(" "),t("ol",[t("li",[e._v("Standard hitscan")])]),e._v(" "),t("h3",{attrs:{id:"secondary-fire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#secondary-fire"}},[e._v("#")]),e._v(" Secondary Fire")]),e._v(" "),t("ol",[t("li",[e._v("Fire burst of 3 hitscan shots")])]),e._v(" "),t("h2",{attrs:{id:"implementation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),t("p",[e._v("To implement such projectile weapon we should create subclasses of "),t("strong",[e._v("AUTWeapon")]),e._v(", "),t("strong",[e._v("UUTWeaponStateFiring")]),e._v(", "),t("strong",[e._v("UUTDamageType")]),e._v(" and "),t("strong",[e._v("AUTWeaponAttachment")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"creating-enforcer-classes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-enforcer-classes"}},[e._v("#")]),e._v(" Creating Enforcer Classes")]),e._v(" "),t("p",[e._v("Create classes for all the elements of Enforcer:")]),e._v(" "),t("ol",[t("li",[e._v("Weapon\n"),t("ol",[t("li",[e._v("Create subclass of "),t("strong",[e._v("AUTWeapon")]),e._v(" called "),t("strong",[e._v("AUTWeap_Enforcer")])])])]),e._v(" "),t("li",[e._v("3rd person weapon attachment\n"),t("ol",[t("li",[e._v("Create subclass of "),t("strong",[e._v("AUTWeaponAttachment")]),e._v(" called "),t("strong",[e._v("AUTAttachment_Enforcer")])])])]),e._v(" "),t("li",[e._v("Burst firing mode\n"),t("ol",[t("li",[e._v("Create subclass of "),t("strong",[e._v("UUTWeaponStateFiring")]),e._v(" called "),t("strong",[e._v("UUTWeaponStateFiringBurst")])])])]),e._v(" "),t("li",[e._v("Damage Types\n"),t("ol",[t("li",[e._v("Create subclass of "),t("strong",[e._v("UUTDamageType")]),e._v(" called "),t("strong",[e._v("UTDmgType_Enforcer")])]),e._v(" "),t("li",[e._v("Create subclass of "),t("strong",[e._v("UUTDamageType")]),e._v(" called "),t("strong",[e._v("UTDmgType_DualEnforcers")])])])])]),e._v(" "),t("h3",{attrs:{id:"setting-up-weapon-asset-references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-weapon-asset-references"}},[e._v("#")]),e._v(" Setting up weapon asset references")]),e._v(" "),t("p",[e._v("We will link all the parts together, add asset references and setup basic properties.")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.cpp")]),e._v(" - Setup asset references")]),e._v(" "),t("ol",[t("li",[t("p",[e._v('#include "UnrealTournament.h"')])]),e._v(" "),t("li",[t("p",[e._v('#include "UTWeap_Enforcer.h"')])]),e._v(" "),t("li",[t("p",[e._v('#include "UTAttachment_Enforcer.h"')])]),e._v(" "),t("li",[t("p",[e._v('#include "UTDmgType_Enforcer.h"')])]),e._v(" "),t("li",[t("p",[e._v('#include "UTDmgType_DualEnforcer.h"')])]),e._v(" "),t("li",[t("p",[e._v("AUTWeap_Enforcer::AUTWeap_Enforcer(const class FPostConstructInitializeProperties& PCIP)")])]),e._v(" "),t("li",[t("p",[e._v(": Super(PCIP)")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("// Structure to hold one-time initialization\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("struct FConstructorStatics\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<USkeletalMesh\\> SkeletalMesh;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UAnimBlueprintGeneratedClass\\> AnimBlueprintGeneratedClass;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> MuzzleFlash;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> FireSound0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> BurstFireSound1;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> FireAnimation0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> BurstFireAnimation1;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> BringUpAnim;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> PutDownAnim;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> FireEffect0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> PickupSound;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tFConstructorStatics()\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t: SkeletalMesh(TEXT(\"SkeletalMesh'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Meshes/SK\\_WP\\_Enforcers\\_1P.SK\\_WP\\_Enforcers\\_1P'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, AnimBlueprintGeneratedClass(TEXT(\"AnimBlueprintGeneratedClass'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Anims/Enforcer\\_AnimBP.Enforcer\\_AnimBP\\_C'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, MuzzleFlash(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Effects/P\\_WP\\_Enforcers\\_MuzzleFlash.P\\_WP\\_Enforcers\\_MuzzleFlash'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, FireSound0(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Audio/CUE/A\\_Weapon\\_Enforcer\\_Fire\\_Cue.A\\_Weapon\\_Enforcer\\_Fire\\_Cue'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, BurstFireSound1(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Audio/CUE/A\\_Weapon\\_Enforcer\\_AltFire\\_Cue.A\\_Weapon\\_Enforcer\\_AltFire\\_Cue'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, FireAnimation0(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Anims/Enforcer\\_ShootSingle\\_Montage.Enforcer\\_ShootSingle\\_Montage'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, BurstFireAnimation1(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Anims/Enforcer\\_ShootSecondary\\_Montage.Enforcer\\_ShootSecondary\\_Montage'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, BringUpAnim(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Anims/Enforcer\\_Equip.Enforcer\\_Equip'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, PutDownAnim(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Anims/Enforcer\\_Putdown.Enforcer\\_Putdown'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, FireEffect0(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Effects/P\\_WP\\_Enforcers\\_Tracer.P\\_WP\\_Enforcers\\_Tracer'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t, PickupSound(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Pickups/Audio/Weapons/Cue/A\\_Pickup\\_Weapons\\_Enforcer\\_Cue.A\\_Pickup\\_Weapons\\_Enforcer\\_Cue'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("};\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("static FConstructorStatics ConstructorStatics;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Mesh\\-\\>SkeletalMesh \\= ConstructorStatics.SkeletalMesh.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Mesh\\-\\>AnimBlueprintGeneratedClass \\= ConstructorStatics.AnimBlueprintGeneratedClass.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Mesh\\-\\>RelativeLocation \\= FVector(\\-30, 0, \\-0);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('TSubobjectPtr<UParticleSystemComponent\\> MuzzleComponent \\= PCIP.CreateDefaultSubobject<UParticleSystemComponent\\>(this, TEXT("Enforcer-Muzzle"));\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("MuzzleComponent\\-\\>Template \\= ConstructorStatics.MuzzleFlash.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('MuzzleComponent\\-\\>AttachTo(Mesh, FName(TEXT("MuzzleFlashSocket")));\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("// Visual\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("MuzzleFlash.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("MuzzleFlash\\[0\\] \\= MuzzleComponent;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("MuzzleFlash\\[1\\] \\= MuzzleComponent;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("AttachmentType \\= AUTAttachment\\_Enforcer::StaticClass();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("BringUpAnim \\= ConstructorStatics.BringUpAnim.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("PutDownAnim \\= ConstructorStatics.PutDownAnim.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireAnimation.SetNumZeroed(1);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireAnimation\\[0\\] \\= ConstructorStatics.FireAnimation0.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireEffect.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireEffect\\[0\\] \\= ConstructorStatics.FireEffect0.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireEffect\\[1\\] \\= ConstructorStatics.FireEffect0.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("// Sounds\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireSound.SetNumZeroed(1);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireSound\\[0\\] \\= ConstructorStatics.FireSound0.Object;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("PickupSound \\= ConstructorStatics.PickupSound.Object;\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("AUTAttachment_Enforcer.cpp")]),e._v(" - Setup asset references")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("AUTAttachment_Enforcer::AUTAttachment_Enforcer(const class FPostConstructInitializeProperties& PCIP)")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" : Super(PCIP)\n")])])])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // Structure to hold one-time initialization\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" struct FConstructorStatics\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tConstructorHelpers::FObjectFinder<USkeletalMesh\\> SkeletalMesh;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tFConstructorStatics()\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\t: SkeletalMesh(TEXT(\"SkeletalMesh'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_Enforcers/Meshes/SK\\_WP\\_Enforcer\\_3P\\_Mid.SK\\_WP\\_Enforcer\\_3P\\_Mid'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("};\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("static FConstructorStatics ConstructorStatics;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Mesh\\-\\>SkeletalMesh \\= ConstructorStatics.SkeletalMesh.Object;\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h3",{attrs:{id:"weapon-firing-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#weapon-firing-properties"}},[e._v("#")]),e._v(" Weapon firing properties")]),e._v(" "),t("p",[e._v("We're going to use weapon properties from UT3. Set them in constructors:")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.cpp")]),e._v(" - Add weapon firing properties to constructor")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" ProjClass.SetNumZeroed(0);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" FInstantHitDamageInfo PrimaryFireInfo;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" PrimaryFireInfo.Momentum \\= 1000 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" PrimaryFireInfo.Damage \\= 20;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" PrimaryFireInfo.DamageType \\= UUTDmgType\\_Enforcer::StaticClass();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" FInstantHitDamageInfo SecondaryFireInfo;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" SecondaryFireInfo.Momentum \\= 1000 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("SecondaryFireInfo.Damage \\= 20;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("SecondaryFireInfo.DamageType \\= UUTDmgType\\_Enforcer::StaticClass();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("InstantHitInfo.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("InstantHitInfo\\[0\\] \\= PrimaryFireInfo;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("InstantHitInfo\\[1\\] \\= SecondaryFireInfo;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireInterval.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireInterval\\[0\\] \\= 0.5;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireInterval\\[1\\] \\= 1.0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("AmmoCost.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("AmmoCost\\[0\\] \\= 1;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("AmmoCost\\[1\\] \\= 1;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Ammo \\= 20;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("MaxAmmo \\= 50;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("FireOffset \\= FVector(50, 0, 0);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Group \\= 4;\n")])])])])]),e._v(" "),t("h3",{attrs:{id:"camera-shake"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#camera-shake"}},[e._v("#")]),e._v(" Camera Shake")]),e._v(" "),t("p",[e._v("Add camera shake to AUTWeapon. If you already have added this code before, just add default properties for Enforcer.")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.h")]),e._v(" - Add camera shake properties and function")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* delay between firing and camera shake being played \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" TArray<float\\> CameraShakeDelay;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* how strong camera shake should be \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" TArray<float\\> CameraShakeScale;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("/\\*\\* camera shake type \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("TArray< TSubclassOf<class UCameraShake\\> \\> CameraShakeType;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("/\\*\\* Plays camera shake immediately \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UFUNCTION(BlueprintCallable, BlueprintNativeEvent, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("void PlayCameraShake();\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.cpp")]),e._v(" - Add PlayCameraShake() implementation")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void AUTWeapon::PlayCameraShake_Implementation()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" if (UTOwner !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tAUTPlayerController\\* PC \\= Cast<AUTPlayerController\\>(UTOwner\\-\\>Controller);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tif (PC !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\t// Play camera shake\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\tif (CameraShakeType.IsValidIndex(CurrentFireMode) && CameraShakeType\\[CurrentFireMode\\] !\\= NULL && CameraShakeScale.IsValidIndex(CurrentFireMode))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t\tPC\\-\\>ClientPlayCameraShake(CameraShakeType\\[CurrentFireMode\\], CameraShakeScale\\[CurrentFireMode\\]);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.cpp")]),e._v(" - Override PlayFiringEffects() so it calls our PlayCameraShake() function")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void AUTWeapon::PlayFiringEffects()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" Super::PlayFiringEffects();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // Play camera shake after optional delay\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" if (CameraShakeDelay.IsValidIndex(CurrentFireMode) && CameraShakeDelay\\[CurrentFireMode\\] \\> 0)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tGetWorldTimerManager().SetTimer(this, &AUTWeapon::PlayCameraShake, CameraShakeDelay\\[CurrentFireMode\\], false);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" }\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("else\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tPlayCameraShake();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.cpp")]),e._v(" - Add CameraShake assets & default properties to constructor")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" struct FConstructorStatics\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t//...\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tConstructorHelpers::FClassFinder<UCameraShake\\> CameraShakeType0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tConstructorHelpers::FClassFinder<UCameraShake\\> CameraShakeType1;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tFConstructorStatics()\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\t//...\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\t, CameraShakeType0(TEXT(\"BlueprintGeneratedClass'/Game/RestrictedAssets/Blueprints/WIP/Nick/CameraAnims/Camerashake2.Camerashake2\\_C'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\t, CameraShakeType1(TEXT(\"BlueprintGeneratedClass'/Game/RestrictedAssets/Blueprints/WIP/Nick/CameraAnims/Camerashake2.Camerashake2\\_C'\"))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("};\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("//...\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeType.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeType\\[0\\] \\= ConstructorStatics.CameraShakeType0.Class;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeType\\[1\\] \\= ConstructorStatics.CameraShakeType1.Class;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeDelay.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeDelay\\[0\\] \\= 0.f;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeDelay\\[1\\] \\= 0.f;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeScale.SetNumZeroed(2);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeScale\\[0\\] \\= 1.f;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("CameraShakeScale\\[1\\] \\= 1.f;\n")])])])])]),e._v(" "),t("h3",{attrs:{id:"adding-custom-weapon-firing-state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adding-custom-weapon-firing-state"}},[e._v("#")]),e._v(" Adding custom weapon firing state")]),e._v(" "),t("p",[e._v("In the Enforcer's constructor we will disable creation of default weapon firing states and create our own ones instead.")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.cpp")]),e._v(" - Create our own weapon firing states")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("AUTWeap_Enforcer::AUTWeap_Enforcer(const class FPostConstructInitializeProperties& PCIP)")])]),e._v(" "),t("li",[t("p",[e._v(": Super(PCIP")])]),e._v(" "),t("li",[t("p",[e._v('.DoNotCreateDefaultSubobject(TEXT("FiringState0"))')])]),e._v(" "),t("li",[t("p",[e._v('.DoNotCreateDefaultSubobject(TEXT("FiringState1"))')])]),e._v(" "),t("li",[t("p",[e._v(")")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" //...\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" if (!GCompilingBlueprint)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('\tUUTWeaponStateFiring\\* PrimaryState \\= PCIP.CreateDefaultSubobject<UUTWeaponStateFiring, UUTWeaponStateFiring\\>(this, FName(TEXT("Enforcer-WeaponState0")), false, false, false);\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (PrimaryState)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringState.Add(PrimaryState);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringStateType.Add(PrimaryState\\-\\>StaticClass());\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('\tUUTWeaponStateFiringBurst\\* AlternateState \\= PCIP.CreateDefaultSubobject<UUTWeaponStateFiringBurst, UUTWeaponStateFiringBurst\\>(this, FName(TEXT("Enforcer-WeaponState1")), false, false, false);\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (AlternateState)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringState.Add(AlternateState);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringStateType.Add(AlternateState\\-\\>StaticClass());\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h3",{attrs:{id:"implementing-burst-firing-state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#implementing-burst-firing-state"}},[e._v("#")]),e._v(" Implementing burst firing state")]),e._v(" "),t("p",[e._v("Weapon firing works as follows (simplified):")]),e._v(" "),t("ol",[t("li",[e._v("When user holds fire and weapon can fire, weapon goes to WeaponStateFiring state, WeaponStateFiring::BeginState() is called")]),e._v(" "),t("li",[e._v("WeaponStateFiring::BeginState() fires a shot and starts a RefireCheckTimer. Weapon can't fire again nor be switched away until this timer finishes.")]),e._v(" "),t("li",[e._v("When RefireCheckTimer times out, weapon checks its state. Firing ends when:\n"),t("ol",[t("li",[e._v("There is a pending weapon change")]),e._v(" "),t("li",[e._v("User no longer presses fire")]),e._v(" "),t("li",[e._v("There is no more ammo")])])]),e._v(" "),t("li",[e._v("Otherwise weapon fires again and timer is restarted.")])]),e._v(" "),t("p",[e._v("To create a burst firing mode, we're going to count the shots and modify RefireCheckTimer so it will automatically fire again until burst completes.")]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.h")]),e._v(" - Add burst count variables")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" int32 BurstRounds;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" int32 BurstRoundsFired;\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Add default values for burst count variables in constructor")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("UUTWeaponStateFiringBurst::UUTWeaponStateFiringBurst(const class FPostConstructInitializeProperties& PCIP)")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" : Super(PCIP)\n")])])])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" BurstRounds \\= 3;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" BurstRoundsFired \\= 0;\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Override FireShot() to increment burst rounds counter")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void UUTWeaponStateFiringBurst::FireShot()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" Super::FireShot();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // Increment number of burst rounds fired\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" ++BurstRoundsFired;\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Override RefireCheckTimer() so it will automatically fire remaining burst rounds as long as there is ammo.")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void UUTWeaponStateFiringBurst::RefireCheckTimer()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UE\\_LOG(LogTemp, Warning, TEXT("%sÂ : BurstRoundsFired:%d"), TEXT(\\_\\_FUNCTION\\_\\_), BurstRoundsFired);\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" if (BurstRoundsFired < BurstRounds)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tif (!GetOuterAUTWeapon()\\-\\>HasAmmo(GetOuterAUTWeapon()\\-\\>GetCurrentFireMode()))\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\tGetOuterAUTWeapon()\\-\\>GotoActiveState();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\telse\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFireShot();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("else\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tBurstRoundsFired \\= 0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tSuper::RefireCheckTimer();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[e._v("Notice that when burst is finished we reset the burst counter.")]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Override BeginState() to reset burst counter whenever weapon goes to firing state")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void UUTWeaponStateFiringBurst::BeginState(const UUTWeaponState* PrevState)")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" BurstRoundsFired \\= 0;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" Super::BeginState(PrevState);\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h4",{attrs:{id:"using-faster-fireinterval-for-burst-firing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-faster-fireinterval-for-burst-firing"}},[e._v("#")]),e._v(" Using faster FireInterval for burst firing")]),e._v(" "),t("p",[e._v("So far the burst works but we want to have a fast refire time for burst shots and longer delay between bursts.")]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.h")]),e._v(" - Add BurstRefireRate variable")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" float BurstRefireRate;\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Set default value for BurstRefireRate in constructor")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" BurstRefireRate \\= 0.15;\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Override UpdateTiming() to use custom shorter refire time if next shot is a part of burst")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void UUTWeaponStateFiringBurst::UpdateTiming()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // TODO: we should really restart the timer at the percentage it currently is, but FTimerManager has no facility to do this\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // If the next round will be a part of this burst, change fire rate to burst rate, otherwise reset it to default.\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" float NextRefireRate \\= (BurstRoundsFired < BurstRounds)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t? BurstRefireRate\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t: GetOuterAUTWeapon()\\-\\>GetRefireTime(GetOuterAUTWeapon()\\-\\>GetCurrentFireMode());\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" GetOuterAUTWeapon()\\-\\>GetWorldTimerManager().SetTimer(this, &UUTWeaponStateFiring::RefireCheckTimer, NextRefireRate, true);\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("UUTWeaponFiringStateBurst.cpp")]),e._v(" - Modify FireShot() to update refire timer after each shot")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void UUTWeaponStateFiringBurst::FireShot()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" Super::FireShot();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // Increment number of burst rounds fired\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" ++BurstRoundsFired;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" // Burst fire uses different firing rate, update according to current state\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" UpdateTiming();\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h3",{attrs:{id:"customizing-the-burst-properties-per-weapon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-burst-properties-per-weapon"}},[e._v("#")]),e._v(" Customizing the burst properties per-weapon")]),e._v(" "),t("p",[e._v("Should we want to create a blueprint of this weapon to tweak the properties, we need to setup the properties in AUTWeap_Enforer. Weapon state objects are not supported by editor property GUI yet.")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.h")]),e._v(" - Add properties to Enforcer")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* Number of rounds to fire in a burst \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Enforcer")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" int32 BurstRounds;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* Time between each round in a burst \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Enforcer")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" float BurstRefireRate;\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeap_Enforcer.cpp")]),e._v(" - Set default properties in Enforcer constructor")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("AUTWeap_Enforcer::AUTWeap_Enforcer(const class FPostConstructInitializeProperties& PCIP)")])]),e._v(" "),t("li",[t("p",[e._v(": Super(PCIP")])]),e._v(" "),t("li",[t("p",[e._v('.DoNotCreateDefaultSubobject(TEXT("FiringState0"))')])]),e._v(" "),t("li",[t("p",[e._v('.DoNotCreateDefaultSubobject(TEXT("FiringState1"))')])]),e._v(" "),t("li",[t("p",[e._v(")")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" //...\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" BurstRounds \\= 3;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("BurstRefireRate \\= 0.15;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("if (!GCompilingBlueprint)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('\tUUTWeaponStateFiring\\* PrimaryState \\= PCIP.CreateDefaultSubobject<UUTWeaponStateFiring, UUTWeaponStateFiring\\>(this, FName(TEXT("Enforcer-WeaponState0")), false, false, false);\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (PrimaryState)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringState.Add(PrimaryState);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringStateType.Add(PrimaryState\\-\\>StaticClass());\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('\tUUTWeaponStateFiringBurst\\* AlternateState \\= PCIP.CreateDefaultSubobject<UUTWeaponStateFiringBurst, UUTWeaponStateFiringBurst\\>(this, FName(TEXT("Enforcer-WeaponState1")), false, false, false);\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (AlternateState)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tAlternateState\\-\\>BurstRounds \\= BurstRounds;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tAlternateState\\-\\>BurstRefireRate \\= BurstRefireRate;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringState.Add(AlternateState);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tFiringStateType.Add(AlternateState\\-\\>StaticClass());\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h3",{attrs:{id:"burst-animations-sounds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#burst-animations-sounds"}},[e._v("#")]),e._v(" Burst animations & sounds")]),e._v(" "),t("p",[e._v("We have an animation & firing sound that covers entire burst. Lets add a function that will play animation & sound when weapon first starts firing, and when it refires after completed firing sequence.")]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.h")]),e._v(" - Add properties & functions")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* AnimMontage to play when weapon initially starts firing \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" TArray<UAnimMontage\\*\\> StartedFireAnimation;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* AnimMontage to play when weapon completes firing sequence and starts firing another one \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" TArray<UAnimMontage\\*\\> ContinuedFireAnimation;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" /\\*\\* Sound to play when weapon initially starts firing \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("TArray<USoundBase\\*\\> StartedFireSound;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("/\\*\\* Sound to play when weapon completes firing sequence and starts firing another one \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("TArray<USoundBase\\*\\> ContinuedFireSound;\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("/\\*\\* Called when weapon initially starts firing \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UFUNCTION(BlueprintCallable, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("virtual void PlayStartedFiringEffects();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("/\\*\\* Called when weapon completes firing sequence and starts firing another one \\*/\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('UFUNCTION(BlueprintCallable, Category \\= "Weapon")\n')])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("virtual void PlayContinuedFiringEffects();\n")])])])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.cpp")]),e._v(" - Add PlayStartedFiringEffects() & PlayContinuedFiringEffects() implementation")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void AUTWeapon::PlayStartedFiringEffects()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" if (GetNetMode() !\\= NM\\_DedicatedServer && UTOwner !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" {\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t// try and play the sound if specified\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \tif (StartedFireSound.IsValidIndex(CurrentFireMode) && StartedFireSound\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t\tUUTGameplayStatics::UTPlaySound(GetWorld(), StartedFireSound\\[CurrentFireMode\\], UTOwner, SRT\\_AllButOwner);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" \t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t// Play animation\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (StartedFireAnimation.IsValidIndex(CurrentFireMode) && StartedFireAnimation\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tUAnimInstance\\* AnimInstance \\= Mesh\\-\\>GetAnimInstance();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tif (AnimInstance !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t\tAnimInstance\\-\\>Montage\\_Play(StartedFireAnimation\\[CurrentFireMode\\], 1.f);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])]),e._v(" "),t("li",[t("p",[e._v("void AUTWeapon::PlayContinuedFiringEffects()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("if (GetNetMode() !\\= NM\\_DedicatedServer && UTOwner !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t// try and play the sound if specified\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (ContinuedFireSound.IsValidIndex(CurrentFireMode) && ContinuedFireSound\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tUUTGameplayStatics::UTPlaySound(GetWorld(), ContinuedFireSound\\[CurrentFireMode\\], UTOwner, SRT\\_AllButOwner);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t// Play animation\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\tif (ContinuedFireAnimation.IsValidIndex(CurrentFireMode) && ContinuedFireAnimation\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tUAnimInstance\\* AnimInstance \\= Mesh\\-\\>GetAnimInstance();\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\tif (AnimInstance !\\= NULL)\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t{\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t\tAnimInstance\\-\\>Montage\\_Play(ContinuedFireAnimation\\[CurrentFireMode\\], 1.f);\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("\t}\n")])])])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("}\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("p",[t("strong",[e._v("AUTWeapon.cpp")]),e._v(" - Modify OnStartedFiring_Implementation() & OnContinuedFiring_Implementation() to make them call our functions")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("void AUTWeapon::OnStartedFiring_Implementation()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" PlayStartedFiringEffects();\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])]),e._v(" "),t("li",[t("p",[e._v("void AUTWeapon::OnContinuedFiring_Implementation()")])]),e._v(" "),t("li",[t("p",[e._v("{")])]),e._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" PlayContinuedFiringEffects();\n")])])])]),e._v(" "),t("li",[t("p",[e._v("}")])])]),e._v(" "),t("h3",{attrs:{id:"dual-weapons"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dual-weapons"}},[e._v("#")]),e._v(" Dual weapons")]),e._v(" "),t("p",[t("strong",[e._v("TODO")])]),e._v(" "),t("h2",{attrs:{id:"source-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#source-code"}},[e._v("#")]),e._v(" Source Code")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/EpicGames/UnrealTournament/pull/27",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/EpicGames/UnrealTournament/pull/27"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v('Retrieved from "'),t("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=UT3_Weapons_Tutorial_-_Enforcer&oldid=10611",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=UT3_Weapons_Tutorial_-_Enforcer&oldid=10611"),t("OutboundLink")],1),e._v('"')]),e._v(" "),t("p",[t("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Categories")]),e._v(":")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"/Category:Unreal_Tournament",title:"Category:Unreal Tournament"}},[e._v("Unreal Tournament")])]),e._v(" "),t("li",[t("a",{attrs:{href:"/Category:UT_Content_Creation",title:"Category:UT Content Creation"}},[e._v("UT Content Creation")])])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);