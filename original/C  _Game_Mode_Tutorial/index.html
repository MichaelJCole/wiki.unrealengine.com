<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>C++ Game Mode Tutorial - Epic Wiki</title>
<meta name="generator" content="MediaWiki 1.22.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Epic Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.unrealengine.com/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: my_wiki:resourceloader:filter:minify-css:7:07b6a8ccf3fd62e770f192d0a6f8e123 */</style>

<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"C++_Game_Mode_Tutorial","wgTitle":"C++ Game Mode Tutorial","wgCurRevisionId":8473,"wgRevisionId":8473,"wgArticleId":2470,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Unreal Tournament","Unreal Tournament Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"C++_Game_Mode_Tutorial","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: my_wiki:resourceloader:filter:minify-js:7:27249162ef7002415c3792ce5dfd2a9a */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000ff;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #666666;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es1 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es2 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es3 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es4 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es5 {color: #006699; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #FF0000;}
.cpp.source-cpp .nu0 {color: #0000dd;}
.cpp.source-cpp .nu6 {color: #208080;}
.cpp.source-cpp .nu8 {color: #208080;}
.cpp.source-cpp .nu12 {color: #208080;}
.cpp.source-cpp .nu16 {color:#800080;}
.cpp.source-cpp .nu17 {color:#800080;}
.cpp.source-cpp .nu18 {color:#800080;}
.cpp.source-cpp .nu19 {color:#800080;}
.cpp.source-cpp .me1 {color: #007788;}
.cpp.source-cpp .me2 {color: #007788;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-C_Game_Mode_Tutorial skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">C++ Game Mode Tutorial</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From Epic Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#C.2B.2B_Game_Mode_Tutorial"><span class="tocnumber">1</span> <span class="toctext">C++ Game Mode Tutorial</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Requirements"><span class="tocnumber">1.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Directory_Structure"><span class="tocnumber">1.2</span> <span class="toctext">Directory Structure</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#UPlugin_File"><span class="tocnumber">1.3</span> <span class="toctext">UPlugin File</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Build.cs_File"><span class="tocnumber">1.4</span> <span class="toctext">Build.cs File</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Header_File"><span class="tocnumber">1.5</span> <span class="toctext">Header File</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Plugin_Module_Interface"><span class="tocnumber">1.6</span> <span class="toctext">Plugin Module Interface</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#The_Game_Mode_.28C.2B.2B.29"><span class="tocnumber">1.7</span> <span class="toctext">The Game Mode (C++)</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Editor_Setup"><span class="tocnumber">1.8</span> <span class="toctext">Editor Setup</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Mutator_Blueprint"><span class="tocnumber">1.9</span> <span class="toctext">Mutator Blueprint</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Game_Mode_Blueprint"><span class="tocnumber">1.10</span> <span class="toctext">Game Mode Blueprint</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Testing"><span class="tocnumber">1.11</span> <span class="toctext">Testing</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="C.2B.2B_Game_Mode_Tutorial">C++ Game Mode Tutorial</span></h1>
<p>This tutorial will teach you how to make a simple Gun Game mode for UT using C++. We'll be making a UE4 plugin that defines a child class of AUTGameMode. I recommend reading the <a href="/C%2B%2B_Mutator_Tutorial" title="C++ Mutator Tutorial">C++ Mutator Tutorial</a>, <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a> and <a href="/Blueprint_Mutator_Tutorial_-_Low_Grav" title="Blueprint Mutator Tutorial - Low Grav">Blueprint_Mutator_Tutorial_-_Low_Grav</a> first. I will be glossing over things covered in depth in other tutorials.
</p>
<h2><span class="mw-headline" id="Requirements">Requirements</span></h2>
<ul>
<li> Engine version: 4.3
</li>
<li> Skill level: intermediate C++ and blueprint knowledge
</li>
</ul>
<h2><span class="mw-headline" id="Directory_Structure">Directory Structure</span></h2>
<ul>
<li>If UnrealTournament\Plugins does not already exist, create it
</li>
<li>Create a directory inside of UnrealTournament\Plugins to hold our game mode, in this case it would be "SampleGameMode"
</li>
<li>Create "Source" and "Content" directories inside of the SampleGameMode directory
</li>
<li>Create a "Public" directory and a "Private" directory inside of the last "SampleGameMode" directory that we made
</li>
</ul>
<h2><span class="mw-headline" id="UPlugin_File">UPlugin File</span></h2>
<ul>
<li>We need to create SampleGameMode.uplugin to let UE4 know we have a plugin it should load
</li>
<li>It should live at the same level that the Source directory does
</li>
<li>The key difference between this .uplugin and the one in the mutator sample is that EnabledByDefault and CanContainContent are set
</li>
</ul>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>SampleGameMode.uplugin</b> - Plugin defintion
</p>
<div class="mw-collapsible-content">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><ol><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;FileVersion&quot;</span> <span class="sy4">:</span> <span class="nu0">3</span>,</pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;FriendlyName&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;Sample Game Mode&quot;</span>,</pre></li><li class="li2"><pre class="de2">	<span class="st0">&quot;Version&quot;</span> <span class="sy4">:</span> <span class="nu0">1</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;VersionName&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;1.0&quot;</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;CreatedBy&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;Epic Games, Inc.&quot;</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;CreatedByURL&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;http://epicgames.com&quot;</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;EngineVersion&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;4.3.0&quot;</span>,</pre></li><li class="li2"><pre class="de2">	<span class="st0">&quot;Description&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;Sample Game Mode&quot;</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;Category&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;UnrealTournament.GameMode&quot;</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;EnabledByDefault&quot;</span> <span class="sy4">:</span> <span class="kw2">true</span>,</pre></li><li class="li1"><pre class="de1">	<span class="st0">&quot;CanContainContent&quot;</span> <span class="sy4">:</span> <span class="kw2">true</span>,</pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">	<span class="st0">&quot;Modules&quot;</span> <span class="sy4">:</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#91;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">			<span class="st0">&quot;Name&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;SampleGameMode&quot;</span>,</pre></li><li class="li1"><pre class="de1">			<span class="st0">&quot;Type&quot;</span> <span class="sy4">:</span> <span class="st0">&quot;Runtime&quot;</span>,</pre></li><li class="li2"><pre class="de2">			<span class="st0">&quot;WhitelistPlatforms&quot;</span> <span class="sy4">:</span> <span class="br0">&#91;</span> <span class="st0">&quot;Win32&quot;</span>, <span class="st0">&quot;Win64&quot;</span> <span class="br0">&#93;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#93;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li></ol></div></div>
</div>
</div>
<h2><span class="mw-headline" id="Build.cs_File">Build.cs File</span></h2>
<ul>
<li>We need to create SampleGameMode.Build.cs so that Unreal Build tool knows how to generate our dll file
</li>
<li>It should live at the same level that the Public and Private directories do
</li>
<li>We'll use the PrivateIncludesPaths array to make #include cleaner throughout our source files
</li>
</ul>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>SampleGameMode.Build.cs</b> - Unreal Build Tool definitions
</p>
<div class="mw-collapsible-content">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><ol><li class="li1"><pre class="de1"><span class="kw2">namespace</span> UnrealBuildTool.<span class="me1">Rules</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw2">public</span> <span class="kw2">class</span> SampleGameMode <span class="sy4">:</span> ModuleRules</pre></li><li class="li1"><pre class="de1">	<span class="br0">&#123;</span></pre></li><li class="li2"><pre class="de2">		<span class="kw2">public</span> SampleGameMode<span class="br0">&#40;</span>TargetInfo Target<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">			PrivateIncludePaths.<span class="me1">Add</span><span class="br0">&#40;</span><span class="st0">&quot;SampleGameMode/Private&quot;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">			PublicDependencyModuleNames.<span class="me1">AddRange</span><span class="br0">&#40;</span></pre></li><li class="li2"><pre class="de2">				<span class="kw3">new</span> string<span class="br0">&#91;</span><span class="br0">&#93;</span></pre></li><li class="li1"><pre class="de1">				<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">					<span class="st0">&quot;Core&quot;</span>,</pre></li><li class="li1"><pre class="de1">					<span class="st0">&quot;CoreUObject&quot;</span>,</pre></li><li class="li1"><pre class="de1">					<span class="st0">&quot;Engine&quot;</span>,</pre></li><li class="li2"><pre class="de2">					<span class="st0">&quot;UnrealTournament&quot;</span>,</pre></li><li class="li1"><pre class="de1">				<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">				<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#125;</span></pre></li><li class="li2"><pre class="de2"><span class="br0">&#125;</span></pre></li></ol></div></div>
</div>
</div>
<h2><span class="mw-headline" id="Header_File">Header File</span></h2>
<ul>
<li>Unreal Build Tool requires that we have a shared header file as the first include in every cpp source file in the plugin.
</li>
<li>We'll put the SampleGameMode.h header file inside of the Public directory
<ol>
<li>include "SampleGameMode.generated.h" is required by Unreal Header Tool
</li>
</ol>
</li>
<li>Our header is a bit more complex than the mutator one. We've defined two custom structs that we've made BlueprintType so they'll be visible when we're in the editor.
</li>
<li>You'll notice that each of the structs is just a TArray and their usage in the ASampleGameMode is just a TArray. UE4 does not currently support TArrays of TArrays so we work around that by housing the inner array inside of a structure.
</li>
<li>We've exposed the StartingInventories and ScoringDamageTypes TArrays to blueprints so they can be filled with content references later. In order for the editor to see them, we made them UPROPERTYs with BlueprintReadWrite markup
</li>
</ul>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>SampleGameMode.h</b> - Sample Mutator class definition
</p>
<div class="mw-collapsible-content">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><ol><li class="li1"><pre class="de1"><span class="co1">// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#pragma once</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;Core.h&quot;</span></pre></li><li class="li2"><pre class="de2"><span class="co2">#include &quot;Engine.h&quot;</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;UTWeapon.h&quot;</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;UTGameMode.h&quot;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;SampleGameMode.generated.h&quot;</span></pre></li><li class="li2"><pre class="de2">&#160;</pre></li><li class="li1"><pre class="de1">USTRUCT<span class="br0">&#40;</span>BlueprintType<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="kw4">struct</span> FStartingInventory</pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	GENERATED_USTRUCT_BODY<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">&#160;</pre></li><li class="li1"><pre class="de1">	UPROPERTY<span class="br0">&#40;</span>EditAnywhere, BlueprintReadWrite, Category<span class="sy1">=</span><span class="st0">&quot;GameMode&quot;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	TArray<span class="sy1">&lt;</span>TSubclassOf<span class="sy1">&lt;</span>AUTInventory<span class="sy1">&gt;&gt;</span> Inventory<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">USTRUCT<span class="br0">&#40;</span>BlueprintType<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="kw4">struct</span> FDamageTypeToProgess</pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	GENERATED_USTRUCT_BODY<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">	UPROPERTY<span class="br0">&#40;</span>EditAnywhere, BlueprintReadWrite, Category <span class="sy1">=</span> <span class="st0">&quot;GameMode&quot;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	TArray<span class="sy1">&lt;</span>TSubclassOf<span class="sy1">&lt;</span>UDamageType<span class="sy1">&gt;&gt;</span> DamageType<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">UCLASS<span class="br0">&#40;</span>Blueprintable, Meta <span class="sy1">=</span> <span class="br0">&#40;</span>ChildCanTick<span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2"><span class="kw2">class</span> ASampleGameMode <span class="sy4">:</span> <span class="kw2">public</span> AUTGameMode</pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	GENERATED_UCLASS_BODY<span class="br0">&#40;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">	UPROPERTY<span class="br0">&#40;</span>EditAnywhere, BlueprintReadWrite, Category<span class="sy1">=</span><span class="st0">&quot;GameMode&quot;</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">	TArray<span class="sy1">&lt;</span>FStartingInventory<span class="sy1">&gt;</span> StartingInventories<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">	UPROPERTY<span class="br0">&#40;</span>EditAnywhere, BlueprintReadWrite, Category <span class="sy1">=</span> <span class="st0">&quot;GameMode&quot;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	TArray<span class="sy1">&lt;</span>FDamageTypeToProgess<span class="sy1">&gt;</span> ScoringDamageTypes<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">	<span class="kw2">virtual</span> <span class="kw4">void</span> GiveDefaultInventory<span class="br0">&#40;</span>APawn<span class="sy2">*</span> PlayerPawn<span class="br0">&#41;</span> override<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw2">virtual</span> <span class="kw4">void</span> ScoreKill<span class="br0">&#40;</span>AController<span class="sy2">*</span> Killer, AController<span class="sy2">*</span> Other, TSubclassOf<span class="sy1">&lt;</span>UDamageType<span class="sy1">&gt;</span> DamageType<span class="br0">&#41;</span> override<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw2">virtual</span> <span class="kw4">void</span> GiveNewGun<span class="br0">&#40;</span>AUTCharacter <span class="sy2">*</span>UTCharacter<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span><span class="sy4">;</span></pre></li></ol></div></div>
</div>
</div>
<h2><span class="mw-headline" id="Plugin_Module_Interface">Plugin Module Interface</span></h2>
<ul>
<li> Very similar to the mutator sample here, just some name changes
</li>
</ul>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>SampleGameModePlugin.cpp</b> - Plugin Module Interface
</p>
<div class="mw-collapsible-content">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><ol><li class="li1"><pre class="de1"><span class="co1">// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;SampleGameMode.h&quot;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2"><span class="co2">#include &quot;Core.h&quot;</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;Engine.h&quot;</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;ModuleManager.h&quot;</span></pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;ModuleInterface.h&quot;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2"><span class="kw2">class</span> FSampleGameModePlugin <span class="sy4">:</span> <span class="kw2">public</span> IModuleInterface</pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	<span class="coMULTI">/** IModuleInterface implementation */</span></pre></li><li class="li1"><pre class="de1">	<span class="kw2">virtual</span> <span class="kw4">void</span> StartupModule<span class="br0">&#40;</span><span class="br0">&#41;</span> override<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw2">virtual</span> <span class="kw4">void</span> ShutdownModule<span class="br0">&#40;</span><span class="br0">&#41;</span> override<span class="sy4">;</span></pre></li><li class="li2"><pre class="de2"><span class="br0">&#125;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">IMPLEMENT_MODULE<span class="br0">&#40;</span> FSampleGameModePlugin, SampleGameMode <span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="kw4">void</span> FSampleGameModePlugin<span class="sy4">::</span><span class="me2">StartupModule</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2"><span class="kw4">void</span> FSampleGameModePlugin<span class="sy4">::</span><span class="me2">ShutdownModule</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li></ol></div></div>
</div>
</div>
<h2><span class="mw-headline" id="The_Game_Mode_.28C.2B.2B.29">The Game Mode (C++)</span></h2>
<ul>
<li>Our aim with this tutorial is to make a game mode that functions like "Gun Game", you start with a weapon according to your score and going up in score gives you the next gun in the sequence. Pickups are disabled and so are weapon drops.
</li>
<li>We'll use C++ to handle giving players the right guns on spawn and giving them the right guns after scoring.
</li>
<li>We'll use Blueprints to handle disabling weapon drops and pickups.
</li>
<li>Blueprints will also be used to get content references to weapons and damagetypes as hard coding them in C++ can be brittle.
</li>
<li>ASampleGameMode::GiveDefaultInventory reads the content reference from StartingInventories that we'll set later in blueprints and spawns that inventory for the spawning player
</li>
<li>ASampleGameMode::ScoreKill verifies that the killing damage type is equal to the content reference from ScoringDamageTypes and then calls GiveNewGun on the killer
</li>
<li>ASampleGameMode::GiveNewGun will discard the character's current inventory and give them the proper gun by reading a content reference from StartingInventories
</li>
</ul>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>SampleGameModePlugin.cpp</b> - Plugin Module Interface
</p>
<div class="mw-collapsible-content">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><ol><li class="li1"><pre class="de1"><span class="co1">// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1"><span class="co2">#include &quot;SampleGameMode.h&quot;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">ASampleGameMode<span class="sy4">::</span><span class="me2">ASampleGameMode</span><span class="br0">&#40;</span><span class="kw4">const</span> FPostConstructInitializeProperties<span class="sy3">&amp;</span> PCIP<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	<span class="sy4">:</span> Super<span class="br0">&#40;</span>PCIP<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2"><span class="kw4">void</span> ASampleGameMode<span class="sy4">::</span><span class="me2">GiveDefaultInventory</span><span class="br0">&#40;</span>APawn<span class="sy2">*</span> PlayerPawn<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	<span class="co1">// Don't call Super</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">	AUTCharacter<span class="sy2">*</span> UTCharacter <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>AUTCharacter<span class="sy1">&gt;</span><span class="br0">&#40;</span>PlayerPawn<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li2"><pre class="de2">	<span class="kw1">if</span> <span class="br0">&#40;</span>UTCharacter <span class="sy3">!</span><span class="sy1">=</span> nullptr <span class="sy3">&amp;&amp;</span> UTCharacter<span class="sy2">-</span><span class="sy1">&gt;</span>GetInventory<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy1">==</span> nullptr<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw4">int32</span> InventoryIndex <span class="sy1">=</span> PlayerPawn<span class="sy2">-</span><span class="sy1">&gt;</span>PlayerState<span class="sy2">-</span><span class="sy1">&gt;</span>Score<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw1">if</span> <span class="br0">&#40;</span>InventoryIndex <span class="sy1">&gt;=</span> StartingInventories.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#123;</span></pre></li><li class="li2"><pre class="de2">			InventoryIndex <span class="sy1">=</span> StartingInventories.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy2">-</span> <span class="nu0">1</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">		<span class="kw1">if</span> <span class="br0">&#40;</span>StartingInventories.<span class="me1">IsValidIndex</span><span class="br0">&#40;</span>InventoryIndex<span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#123;</span></pre></li><li class="li2"><pre class="de2">			<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int32</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span>.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">				<span class="kw1">if</span> <span class="br0">&#40;</span>StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy3">!</span><span class="sy1">=</span> nullptr<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">				<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">					UTCharacter<span class="sy2">-</span><span class="sy1">&gt;</span>AddInventory<span class="br0">&#40;</span>GetWorld<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy2">-</span><span class="sy1">&gt;</span>SpawnActor<span class="sy1">&lt;</span>AUTInventory<span class="sy1">&gt;</span><span class="br0">&#40;</span>StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span>, FVector<span class="br0">&#40;</span><span class="nu17">0.0f</span><span class="br0">&#41;</span>, FRotator<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="kw2">true</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li2"><pre class="de2">				<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li><li class="li2"><pre class="de2">&#160;</pre></li><li class="li1"><pre class="de1"><span class="kw4">void</span> ASampleGameMode<span class="sy4">::</span><span class="me2">ScoreKill</span><span class="br0">&#40;</span>AController<span class="sy2">*</span> Killer, AController<span class="sy2">*</span> Other, TSubclassOf<span class="sy1">&lt;</span>UDamageType<span class="sy1">&gt;</span> DamageType<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	<span class="co1">// Just a suicide, pass it through</span></pre></li><li class="li1"><pre class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span>Killer <span class="sy1">==</span> Other <span class="sy3">||</span> Killer <span class="sy1">==</span> nullptr<span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">	<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">		Super<span class="sy4">::</span><span class="me2">ScoreKill</span><span class="br0">&#40;</span>Killer, Other, DamageType<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw1">return</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">	APlayerState<span class="sy2">*</span> KillerPlayerState <span class="sy1">=</span> Killer<span class="sy2">-</span><span class="sy1">&gt;</span>PlayerState<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span>KillerPlayerState<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw4">int32</span> DamageIndex <span class="sy1">=</span> KillerPlayerState<span class="sy2">-</span><span class="sy1">&gt;</span>Score<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw1">if</span> <span class="br0">&#40;</span>DamageIndex <span class="sy1">&gt;=</span> ScoringDamageTypes.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">		<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">			DamageIndex <span class="sy1">=</span> ScoringDamageTypes.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy2">-</span> <span class="nu0">1</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li1"><pre class="de1">		<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int32</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> ScoringDamageTypes<span class="br0">&#91;</span>DamageIndex<span class="br0">&#93;</span>.<span class="me1">DamageType</span>.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">		<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">			<span class="kw1">if</span> <span class="br0">&#40;</span>DamageType <span class="sy1">==</span> ScoringDamageTypes<span class="br0">&#91;</span>DamageIndex<span class="br0">&#93;</span>.<span class="me1">DamageType</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">				Super<span class="sy4">::</span><span class="me2">ScoreKill</span><span class="br0">&#40;</span>Killer, Other, DamageType<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">				<span class="co1">// If we changed score, give player a new gun</span></pre></li><li class="li1"><pre class="de1">				<span class="kw1">if</span> <span class="br0">&#40;</span>DamageIndex <span class="sy3">!</span><span class="sy1">=</span> KillerPlayerState<span class="sy2">-</span><span class="sy1">&gt;</span>Score<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">				<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">					AUTCharacter<span class="sy2">*</span> UTCharacter <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>AUTCharacter<span class="sy1">&gt;</span><span class="br0">&#40;</span>Killer<span class="sy2">-</span><span class="sy1">&gt;</span>GetPawn<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">					<span class="kw1">if</span> <span class="br0">&#40;</span>UTCharacter <span class="sy3">!</span><span class="sy1">=</span> nullptr<span class="br0">&#41;</span></pre></li><li class="li2"><pre class="de2">					<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">						GiveNewGun<span class="br0">&#40;</span>UTCharacter<span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">					<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">				<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">				<span class="kw1">break</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li><li class="li2"><pre class="de2">&#160;</pre></li><li class="li1"><pre class="de1"><span class="kw4">void</span> ASampleGameMode<span class="sy4">::</span><span class="me2">GiveNewGun</span><span class="br0">&#40;</span>AUTCharacter <span class="sy2">*</span>UTCharacter<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">	UTCharacter<span class="sy2">-</span><span class="sy1">&gt;</span>DiscardAllInventory<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">&#160;</pre></li><li class="li2"><pre class="de2">	<span class="kw4">int32</span> InventoryIndex <span class="sy1">=</span> UTCharacter<span class="sy2">-</span><span class="sy1">&gt;</span>PlayerState<span class="sy2">-</span><span class="sy1">&gt;</span>Score<span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span>InventoryIndex <span class="sy1">&gt;=</span> StartingInventories.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">		InventoryIndex <span class="sy1">=</span> StartingInventories.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy2">-</span> <span class="nu0">1</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#125;</span></pre></li><li class="li2"><pre class="de2">&#160;</pre></li><li class="li1"><pre class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span>StartingInventories.<span class="me1">IsValidIndex</span><span class="br0">&#40;</span>InventoryIndex<span class="br0">&#41;</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">	<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">		<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int32</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span>.<span class="me1">Num</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#123;</span></pre></li><li class="li2"><pre class="de2">			<span class="kw1">if</span> <span class="br0">&#40;</span>StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy3">!</span><span class="sy1">=</span> nullptr<span class="br0">&#41;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#123;</span></pre></li><li class="li1"><pre class="de1">				UTCharacter<span class="sy2">-</span><span class="sy1">&gt;</span>AddInventory<span class="br0">&#40;</span>GetWorld<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy2">-</span><span class="sy1">&gt;</span>SpawnActor<span class="sy1">&lt;</span>AUTInventory<span class="sy1">&gt;</span><span class="br0">&#40;</span>StartingInventories<span class="br0">&#91;</span>InventoryIndex<span class="br0">&#93;</span>.<span class="me1">Inventory</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span>, FVector<span class="br0">&#40;</span><span class="nu17">0.0f</span><span class="br0">&#41;</span>, FRotator<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="kw2">true</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></li><li class="li1"><pre class="de1">			<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1">		<span class="br0">&#125;</span></pre></li><li class="li2"><pre class="de2">	<span class="br0">&#125;</span></pre></li><li class="li1"><pre class="de1"><span class="br0">&#125;</span></pre></li></ol></div></div>
</div>
</div>
<h2><span class="mw-headline" id="Editor_Setup">Editor Setup</span></h2>
<ul>
<li>You'll need to enable "Show Plugin Content" in the Content Browser's "View Options" menu
</li>
</ul>
<p><a href="/File:Gamemodetutorial_viewplugincontent.png" class="image"><img alt="Gamemodetutorial viewplugincontent.png" src="https://d26ilriwvtzlb.cloudfront.net/b/b6/Gamemodetutorial_viewplugincontent.png" width="927" height="768" /></a>
</p>
<ul>
<li>Inside the SampleGameMode folder, make two new blueprints: BP_SampleGameBuiltinMutator with parent UTMutator and BP_SampleGameMode with parent SampleGameMode. Make sure to check out <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a> and <a href="/Blueprint_Mutator_Tutorial_-_Low_Grav" title="Blueprint Mutator Tutorial - Low Grav">Blueprint_Mutator_Tutorial_-_Low_Grav</a> for more information on blueprints.
</li>
</ul>
<h2><span class="mw-headline" id="Mutator_Blueprint">Mutator Blueprint</span></h2>
<ul>
<li>We want to use a mutator to destroy all map pickups and all dropped pickups similar to <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a>
</li>
<li>We'll override the Check Relevance function as seen below
</li>
</ul>
<p><a href="/File:Gamemodetutorial_mutator.png" class="image"><img alt="Gamemodetutorial mutator.png" src="https://d26ilriwvtzlb.cloudfront.net/c/ce/Gamemodetutorial_mutator.png" width="1213" height="484" /></a>
</p>
<h2><span class="mw-headline" id="Game_Mode_Blueprint">Game Mode Blueprint</span></h2>
<ul>
<li>Open up BP_SampleGameMode and go to the default properties tab
</li>
<li>First, we'll set the Built in Mutators array to reference BP_SampleGameBuiltinMutator
</li>
</ul>
<p><a href="/File:Gamemodetutorial_builtin.png" class="image"><img alt="Gamemodetutorial builtin.png" src="https://d26ilriwvtzlb.cloudfront.net/0/09/Gamemodetutorial_builtin.png" width="961" height="91" /></a>
</p>
<ul>
<li>Next, we'll set the HUD Class to UTHUD_DM
</li>
</ul>
<p><a href="/File:Gamemodetutorial_hudclass.png" class="image"><img alt="Gamemodetutorial hudclass.png" src="https://d26ilriwvtzlb.cloudfront.net/3/3c/Gamemodetutorial_hudclass.png" width="803" height="31" /></a>
</p>
<ul>
<li>Third, we'll set up the content references to our guns in the StartingInventories array
</li>
</ul>
<p><a href="/File:Gamemodetutorial_startinginventory.png" class="image"><img alt="Gamemodetutorial startinginventory.png" src="https://d26ilriwvtzlb.cloudfront.net/7/71/Gamemodetutorial_startinginventory.png" width="908" height="774" /></a>
</p>
<ul>
<li>Finally, we'll set up the content references to our damage types in the ScoringDamageTypes array
</li>
</ul>
<p><a href="/File:Gamemodetutorial_damagetypes.png" class="image"><img alt="Gamemodetutorial damagetypes.png" src="https://d26ilriwvtzlb.cloudfront.net/a/aa/Gamemodetutorial_damagetypes.png" width="931" height="969" /></a>
</p>
<h2><span class="mw-headline" id="Testing">Testing</span></h2>
<ul>
<li>To make typing our command line easier, you should add a game mode alias to DefaultGame.ini
</li>
<li>Under [/Script/Engine.GameMode] put +GameModeClassAliases=(ShortName="Sample",GameClassName="/SampleGameMode/BP_SampleGameMode.BP_SampleGameMode_C")
</li>
<li>The game type can now be tested by using&#160;?game=sample instead of&#160;?game=/SampleGameMode/BP_SampleGameMode.BP_SampleGameMode_C
</li>
<li>Make sure to restart the editor after putting that in the ini
</li>
<li>I prefer to test in PIE by setting the number of clients to 2, but you can also test via commandline by running a server with "ue4editor unrealtournament -game example_map?game=sample?listen" and a client with "ue4editor unrealtournament -game 127.0.0.1"
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.107 seconds
Real time usage: 0.210 seconds
Preprocessor visited node count: 102/1000000
Preprocessor generated node count: 172/1000000
Postexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:2470-0!*!0!!en!2!* and timestamp 20140824041114
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="https://wiki.unrealengine.com/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;oldid=8473">https://wiki.unrealengine.com/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;oldid=8473</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/Category:Unreal_Tournament" title="Category:Unreal Tournament">Unreal Tournament</a></li><li><a href="/Category:Unreal_Tournament_Tutorials" title="Category:Unreal Tournament Tutorials">Unreal Tournament Tutorials</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=C%2B%2B+Game+Mode+Tutorial&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=C%2B%2B+Game+Mode+Tutorial" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/C%2B%2B_Game_Mode_Tutorial"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/index.php?title=Talk:C%2B%2B_Game_Mode_Tutorial&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/C%2B%2B_Game_Mode_Tutorial" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search Epic Wiki [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/images/WikiLogo_uev2.png);" href="/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage"><a href="/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
			<li id="n-Tutorials"><a href="/Category:Tutorials">Tutorials</a></li>
			<li id="n-Videos"><a href="/Videos">Videos</a></li>
			<li id="n-Plug-ins"><a href="/Category:Plug-ins">Plug-ins</a></li>
			<li id="n-Code"><a href="/Category:Code">Code</a></li>
			<li id="n-Games"><a href="/Category:Games">Games</a></li>
			<li id="n-Unreal-Tournament"><a href="/Category:Unreal_Tournament">Unreal Tournament</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/C%2B%2B_Game_Mode_Tutorial" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/C%2B%2B_Game_Mode_Tutorial" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;oldid=8473" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<div name="copyright">&#169; 2004-2014, Epic Games, Inc. All rights reserved. Epic Games, Unreal, Unreal Engine, Unreal Tournament, and their respective logos are Epic's trademarks or registered trademarks in the US and elsewhere.</div>
					</li>
					<li id="footer-termsofuseico">
						<div name="termsofuse"><a href="http://epicgames.com/tou" target="_blank">Terms of Use</a></div>
					</li>
					<li id="footer-privacynoticeico">
						<div name="privacynotice"><a href="http://epicgames.com/privacynotice" target="_blank">Privacy Policy</a></div>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<!-- Served in 0.061 secs. -->
	</body>
</html>
